!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="http://cache.soso.com/wenwen/deploy/js/zhinan/pc/detail/",e(0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){$(".guide-end").each(function(){var t=$(this);t.prev().outerHeight()<110?t.hide():t.show()})}function a(){var t=location.hash.replace("#",""),e=navigator.userAgent.toLowerCase(),i=$(document.body);(/msie/.test(e)||/trident/.test(e)||/firefox/.test(e))&&(i=$("html")),$("#"+t).length&&i.animate({scrollTop:$("#"+t).offset().top-90})}var r=i(5),s=i(4);i(6);var u=i(7),l=PubSub.subscribe,f=function(){function t(){n(this,t)}return t.prototype.init=function(){var t=new r.LikeUnlike;t.init();var e=new s.ComputeAnchorPosition;e.init();var i=-1;l("an_image_lazy_load_complete",function(t,n){clearTimeout(i),i=setTimeout(function(){e.calculatePositionInfo()},250),o(),a()})},t}();$(function(){var t=new f;t.init(),(0,u.convertURLToLink)($(".authorBrief")),$(".head-nav-sub li a").click(function(){var t=$(this),e=t.attr("href");t.attr("href",e+"&pid=zn.xqy")}),o(),"function"==typeof stget&&stget("zn.pc.xqy.fl."+_gtag.cateId)})},function(t,e){"use strict";function i(t){if("string"!=typeof t)throw new TypeError("This library (validator.js) validates strings only")}e.__esModule=!0,e.default=i},function(t,e){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);return t}e.__esModule=!0,e.default=i},function(t,e){"use strict";function i(t,e,i){return $.ajax({url:"http://wenwen.sogou.com/wapi/ms/baike-jsonp",data:{qid:t,title:e,type:2},dataType:"jsonp",success:function(t){t&&t.id>0&&i(t)}})}e.__esModule=!0,e.getRelateBaike=i},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;e.ComputeAnchorPosition=function(){function t(){i(this,t),this.$win=$(window),this.anchorPositionList=[],this.$guideDetailNavs=$(".guide-detail-nav"),this.$guideNavLis=this.$guideDetailNavs.find(">li")}return t.prototype.computeMenuFixedStatus=function(){for(var t=this,e=t.$win.scrollTop(),i=t.menuPositionList.length,n=0;n<i;n++){var o=t.menuPositionList[n];if(o.top<e&&o.bottom>e){t.$guideDetailNavs.removeClass("fixed").eq(n).addClass("fixed");break}t.$guideDetailNavs.eq(n).removeClass("fixed")}},t.prototype.computeAnchorPosition=function(){var t=this,e=t.$win.height(),i=t.anchorPositionList.length,n=t.$win.scrollTop(),o=$("body");t.computeMenuFixedStatus();for(var a={top:n+e/3,bottom:n+2*e/3},r=0;r<i;r++){var s=t.anchorPositionList[r];if(0==n){t.$guideNavLis.first().addClass("active").siblings().removeClass("active");break}if(n+e==o[0].scrollHeight){t.$guideNavLis.last().addClass("active").siblings().removeClass("active");break}if(s.top>=a.top&&s.top<=a.bottom||s.bottom>=a.top&&s.bottom<=a.bottom||s.top<a.top&&s.bottom>a.bottom){var u=t.$guideNavLis.removeClass("active").filter("#step"+s.step).addClass("active"),l=u.parent();e<l.height()+90&&t.adjustGuideNav(l,u);break}}},t.prototype.getPositionInfo=function(t){for(var e=this,i=e.anchorPositionList.length,n=0;n<i;n++){var o=e.anchorPositionList[n];if(parseInt(o.step)==parseInt(t))return o}return{top:-1,step:-1}},t.prototype.calculatePositionInfo=function(){var t=this;t.anchorPositionList=[],$('a[name*="step"]').each(function(){var e=$(this),i=e.attr("data-step"),n=$("#guide"+i),o=n.offset();t.anchorPositionList.push({top:o.top,step:i,bottom:o.top+n.height()})}),t.menuPositionList=[],$(".guide-detail-step").each(function(e){var i=$(this),n=i.offset();if("undefined"!=typeof n){if(n.top=n.top-90,e>0){var o=t.menuPositionList[e-1];o.bottom=n.top-o.height}t.menuPositionList.push({method:e,top:n.top,bottom:n.top+$("#guide_"+(e+1)+"_detail").height(),height:t.$guideDetailNavs.eq(e).height()})}});var e=window.location.hash.replace("#","");e?$("#"+e).trigger("click"):t.computeAnchorPosition()},t.prototype.adjustGuideNav=function(t,e){var i=this,n=i.$win.height(),o=t.height();if(n<o+90){var a=Math.ceil(t.children().length/2),r=e.index();r>a?t.css("margin-top",-37*(r-a)):t.css("margin-top",20)}},t.prototype.init=function(){var t=this;t.calculatePositionInfo(),t.$win.on("scroll",function(){return!window.animating&&void t.computeAnchorPosition()}),$(window).on("mousewheel",function(){$("body, html").stop()}),t.$guideDetailNavs.on("click","li",function(e){var i=$("body");e.preventDefault(),e.stopPropagation(),i.stop(),window.animating=!0;var n=$(this),o=t.$guideNavLis,a=$(".head-wrap").height(),r=n.attr("data-step"),s=t.getPositionInfo(r).top,u=o.filter("li.active");n.addClass("active").siblings().removeClass("active");var l=t.getPositionInfo(r).top-a,f=0==u.length?s:s-l,c=navigator.userAgent.toLowerCase(),d=i;(/msie/.test(c)||/trident/.test(c)||/firefox/.test(c))&&(d=$("html"));var g=t.$win.height(),p=u.parent(),v=p.height();g<v+90&&t.adjustGuideNav(p,n),d.animate({scrollTop:l},Math.abs(f>=600?800:400),function(){setTimeout(function(){"00"==r&&p.removeClass("fixed"),t.computeMenuFixedStatus(),window.animating=!1},250)}),stget("zn.xqy.buzhoudaohang","zhinan")})},t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=window.utils;e.LikeUnlike=function(){function t(){i(this,t),this.$voteLike=$("#voteLike"),this.$voteUnlike=$("#voteUnLike")}return t.prototype.isInt=function(t){return Number(t)==t&&t%1===0},t.prototype.like=function(t){var e=this;$.ajax({url:"/guide/like",type:"POST",data:{id:_gtag.guideId,like:t},dataType:"JSON",success:function(i){if(0==i.retcode){if(t){if(e.isInt(_gtag.likeNum)){var n=parseInt(_gtag.likeNum)+1;_gtag.likeNum=n.toString(),e.$voteLike.attr("data-likenum",_gtag.likeNum)}else _gtag.likeNum="1",e.$voteLike.attr("data-likenum","1"),e.isInt(_gtag.unlikeNum)||(_gtag.unlikeNum="0",e.$voteUnlike.attr("data-unlikenum",_gtag.unlikeNum).text(_gtag.unlikeNum));e.$voteLike.next(".vote-text").text(_gtag.likeNum),e.$voteUnlike.next(".vote-text").text(_gtag.unlikeNum),e.$voteLike.text(_gtag.likeNum),stget("zn.xqy.zan","zhinan")}else{if(e.isInt(_gtag.unlikeNum)){var o=parseInt(_gtag.unlikeNum)+1;_gtag.unlikeNum=o.toString(),e.$voteUnlike.attr("data-unlikenum",_gtag.unlikeNum)}else _gtag.unlikeNum="1",e.$voteUnlike.attr("data-unlikenum","1"),e.isInt(_gtag.likeNum)||(_gtag.likeNum="0",e.$voteLike.attr("data-likenum",_gtag.likeNum).text(_gtag.likeNum));e.$voteUnlike.text(_gtag.unlikeNum),e.$voteLike.next(".vote-text").text(_gtag.likeNum),e.$voteUnlike.next(".vote-text").text(_gtag.unlikeNum),stget("zn.xqy.hehe","zhinan")}e.$voteLike.attr("data-status","已评价"),e.$voteUnlike.attr("data-status","已评价")}else if(1==i.retcode)e.$voteLike.attr("data-status","已评价"),e.$voteUnlike.attr("data-status","已评价");else if(i.retcode==-1);else if(100==i.retcode){if($(".likeTask").show(),stget("zn.xqy.zan.tanchuang"),e.isInt(_gtag.likeNum)){var a=parseInt(_gtag.likeNum)+1;_gtag.likeNum=a.toString(),e.$voteLike.attr("data-likenum",_gtag.likeNum)}else _gtag.likeNum="1",e.$voteLike.attr("data-likenum","1"),e.isInt(_gtag.unlikeNum)||(_gtag.unlikeNum="0",e.$voteUnlike.attr("data-unlikenum",_gtag.unlikeNum).text(_gtag.unlikeNum));e.$voteLike.next(".vote-text").text(_gtag.likeNum),e.$voteUnlike.next(".vote-text").text(_gtag.unlikeNum),e.$voteLike.text(_gtag.likeNum),e.$voteLike.attr("data-status","已评价"),e.$voteUnlike.attr("data-status","已评价"),stget("zn.xqy.zan","zhinan"),setTimeout(function(){$(".likeTask").hide()},2e3)}}})},t.prototype.checkBeforeLike=function(t){var e=this;WKSSO.insureLoginAction(function(){n.updateLoginBar(),n.checkUserIsBanned(function(){e.like(t)})})},t.prototype.init=function(){var t=this;$(".vote-recommend").click(function(){return!t.$voteLike.attr("data-status")&&void t.checkBeforeLike(!0)}),$(".vote-not-recommend").click(function(){return!t.$voteUnlike.attr("data-status")&&void t.checkBeforeLike(!1)}),t.$voteLike.on("mouseover",function(e){e.preventDefault(),e.stopPropagation();var i=t.$voteLike.attr("data-status");i&&$(this).next(".vote-text").text(i)}).on("mouseout",function(e){e.preventDefault(),e.stopPropagation();var i=t.$voteLike.attr("data-likenum");"undefined"!=typeof i&&t.$voteLike.text(i)}),t.$voteUnlike.on("mouseover",function(e){e.preventDefault(),e.stopPropagation();var i=t.$voteUnlike.attr("data-status");i&&$(this).next(".vote-text").text(i)}).on("mouseout",function(e){e.preventDefault(),e.stopPropagation();var i=t.$voteUnlike.attr("data-unlikenum");"undefined"!=typeof i&&t.$voteUnlike.text(i)})},t}()},function(t,e,i){"use strict";var n=i(3),o=i(8),a=window.template;a.helper("appendURLCHParam",o.appendURLCHParam),$(function(){(0,n.getRelateBaike)(_gtag.guideId,_gtag.title,function(t){var e=i(12),n=a.compile(e)({recommend:t}),o=$("#relatedListWrap");o.children().length>0?o.children().eq(0).after(n):(n='<h2 class="related-title">相关推荐:</h2><ul class="related-list" id="relatedListWrap">'+n+"</ul>",$("#relatedBaike").append(n))})})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=/(https?|ftp)\:\/\/[A-Za-z0-9\.\/\?\&\=\#]+/gi,i=e.exec(t);return i?i[0]:""}function a(t){if(!_gtag.isAdUser)return!1;var e=t.text(),i=o(e);(0,s.default)(i)&&(e=e.replace(i,'<a class="url_brief" target="_blank" href="'+i+'" style="">'+i+"</a>"),_gtag.host&&!utils.getQueryString("id")?t.html(e):t.html(e))}e.__esModule=!0,e.convertURLToLink=a;var r=i(11),s=n(r)},function(t,e){"use strict";function i(t,e){return"/guide/detail?id="+t}function n(t,e){if("string"!=typeof t)return"";var i=t.split("#"),n=i[1]||"",o=i[0];return o=o+(o.indexOf("?")>-1?"&":"?")+"ch="+e,o+(n?"#":"")+n}e.__esModule=!0,e.getDetailURL=i,e.appendURLCHParam=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){(0,r.default)(t),e=(0,u.default)(e,l),e.allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var i=t.split(".");if(e.require_tld){var n=i.pop();if(!i.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1}for(var o,a=0;a<i.length;a++){if(o=i[a],e.allow_underscores&&(o=o.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(o))return!1;if(/[\uff01-\uff5e]/.test(o))return!1;if("-"===o[0]||"-"===o[o.length-1])return!1}return!0}e.__esModule=!0,e.default=o;var a=i(1),r=n(a),s=i(2),u=n(s),l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,r.default)(t),e=String(e),!e)return o(t,4)||o(t,6);if("4"===e){if(!s.test(t))return!1;var i=t.split(".").sort(function(t,e){return t-e});return i[3]<=255}if("6"===e){var n=t.split(":"),a=!1,l=o(n[n.length-1],4),f=l?7:8;if(n.length>f)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(n.shift(),n.shift(),a=!0):"::"===t.substr(t.length-2)&&(n.pop(),n.pop(),a=!0);for(var c=0;c<n.length;++c)if(""===n[c]&&c>0&&c<n.length-1){if(a)return!1;a=!0}else if(l&&c===n.length-1);else if(!u.test(n[c]))return!1;return a?n.length>=1:n.length===f}return!1}e.__esModule=!0,e.default=o;var a=i(1),r=n(a),s=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,u=/^[0-9A-F]{1,4}$/i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(t===n||o(n)&&n.test(t))return!0}return!1}function r(t,e){if((0,u.default)(t),!t||t.length>=2083||/\s/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;e=(0,p.default)(e,v);var i=void 0,n=void 0,o=void 0,r=void 0,s=void 0,l=void 0,c=void 0,g=void 0;if(c=t.split("#"),t=c.shift(),c=t.split("?"),t=c.shift(),c=t.split("://"),c.length>1){if(i=c.shift(),e.require_valid_protocol&&e.protocols.indexOf(i)===-1)return!1}else{if(e.require_protocol)return!1;e.allow_protocol_relative_urls&&"//"===t.substr(0,2)&&(c[0]=t.substr(2))}if(t=c.join("://"),c=t.split("/"),t=c.shift(),""===t&&!e.require_host)return!0;if(c=t.split("@"),c.length>1&&(n=c.shift(),n.indexOf(":")>=0&&n.split(":").length>2))return!1;r=c.join("@"),l=g=null;var m=r.match(h);return m?(o="",g=m[1],l=m[2]||null):(c=r.split(":"),o=c.shift(),c.length&&(l=c.join(":"))),!(null!==l&&(s=parseInt(l,10),!/^[0-9]+$/.test(l)||s<=0||s>65535))&&(!!((0,d.default)(o)||(0,f.default)(o,e)||g&&(0,d.default)(g,6)||"localhost"===o)&&(o=o||g,!(e.host_whitelist&&!a(o,e.host_whitelist))&&(!e.host_blacklist||!a(o,e.host_blacklist))))}e.__esModule=!0,e.default=r;var s=i(1),u=n(s),l=i(9),f=n(l),c=i(10),d=n(c),g=i(2),p=n(g),v={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},h=/^\[([^\]]+)\](?::([0-9]+))?$/},function(t,e){t.exports='<li>\r\n    <span class="related-time">2016.10.21</span>\r\n    <a href="<%=appendURLCHParam(recommend.url, \'zhinan.relative\')%>" target="_blank">\r\n        <span class="rcItemTitle"><%=recommend.title%>_搜狗百科</span>\r\n    </a>\r\n</li>'}]);