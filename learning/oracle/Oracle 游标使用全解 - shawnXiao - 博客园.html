
<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Oracle 游标使用全解 - shawnXiao - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=m_FXmwz3wxZoecUwNEK23PAzc-j9vbX_C6MblJ5ouMc1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/En_summerGarden/bundle-En_summerGarden.css?v=5UXNApGZa5N8RFQPFmGYh3CR3zSIC4aSD9THmBK8goI1"/>
<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="/skins/En_summerGarden/bundle-En_summerGarden-mobile.css?v=7p343dtfpSrPZUTTIq4pn9TfkbihIZ6ddmVZi4kURjY1"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/sc-xx/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/sc-xx/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/sc-xx/wlwmanifest.xml"/>
<script src="//common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'sc-xx', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="/bundles/blog-common.js?v=CPv0EEqm9L2aCgolHxaZfVYM6J-Sn5az_FJXbjzgr-o1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/sc-xx/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="Return Home" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/sc-xx/">Shawn</a></h1>
<h2>真诚 刻苦 坚持





文章是自己的笔记，若有不妥，敬请留言..thank you!</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<!--done-->
			<ul id="navList">
				<li><a id="blog_nav_sitehome" class="menu" href="http://www.cnblogs.com/">CnBlogs</a></li>
				<li><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/sc-xx/">Home</a></li>
				<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">New Post</a></li>
				<li><a id="blog_nav_contact" accesskey="9" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/shawnXiao">Contact</a></li>
				<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">Admin</a></li>
				<li><a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/sc-xx/rss">Rss</a>
				<a id="blog_nav_rss_image" class="aHeaderXML" href="http://www.cnblogs.com/sc-xx/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="Rss" /></a></li>
			</ul>


		<div class="blogStats">
			
			<div id="blog_stats">
<!--done-->
Posts - 49&nbsp;
Articles - 1&nbsp;
Comments - 58&nbsp;
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/sc-xx/archive/2011/12/03/2275084.html">Oracle 游标使用全解</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>这个文档几乎包含了oracle游标使用的方方面面，全部通过了测试</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">--</span><span style="color: #008080;"> 声明游标；CURSOR cursor_name IS select_statement</span><span style="color: #008080;"><br /></span><br /><span style="color: #008080;">--</span><span style="color: #008080;">For 循环游标</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">（1）定义游标</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">（2）定义游标变量</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">（3）使用for循环来使用这个游标</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />       <span style="color: #008080;">--</span><span style="color: #008080;">类型定义</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">cursor</span> c_job<br />       <span style="color: #0000ff;">is</span><br />       <span style="color: #0000ff;">select</span> empno,ename,job,sal<br />       <span style="color: #0000ff;">from</span> emp<br />       <span style="color: #0000ff;">where</span> job<span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">MANAGER</span><span style="color: #ff0000;">'</span>;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">定义一个游标变量v_cinfo c_emp%ROWTYPE ，该类型为游标c_emp中的一行数据类型</span><span style="color: #008080;"><br /></span>       c_row c_job<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />       <span style="color: #0000ff;">for</span> c_row <span style="color: #808080;">in</span> c_job loop<br />         dbms_output.put_line(c_row.empno<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.ename<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.job<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.sal);<br />       <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><br /><br />      <br /><span style="color: #008080;">--</span><span style="color: #008080;">Fetch游标</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">使用的时候必须要明确的打开和关闭</span><span style="color: #008080;"><br /></span><br /><span style="color: #0000ff;">declare</span> <br />       <span style="color: #008080;">--</span><span style="color: #008080;">类型定义</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">cursor</span> c_job<br />       <span style="color: #0000ff;">is</span><br />       <span style="color: #0000ff;">select</span> empno,ename,job,sal<br />       <span style="color: #0000ff;">from</span> emp<br />       <span style="color: #0000ff;">where</span> job<span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">MANAGER</span><span style="color: #ff0000;">'</span>;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">定义一个游标变量</span><span style="color: #008080;"><br /></span>       c_row c_job<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />       <span style="color: #0000ff;">open</span> c_job;<br />         loop<br />           <span style="color: #008080;">--</span><span style="color: #008080;">提取一行数据到c_row</span><span style="color: #008080;"><br /></span>           <span style="color: #0000ff;">fetch</span> c_job <span style="color: #0000ff;">into</span> c_row;<br />           <span style="color: #008080;">--</span><span style="color: #008080;">判读是否提取到值，没取到值就退出</span><span style="color: #008080;"><br /></span>           <span style="color: #008080;">--</span><span style="color: #008080;">取到值c_job%notfound 是false </span><span style="color: #008080;"><br /></span>           <span style="color: #008080;">--</span><span style="color: #008080;">取不到值c_job%notfound 是true</span><span style="color: #008080;"><br /></span>           <span style="color: #0000ff;">exit</span> <span style="color: #0000ff;">when</span> c_job<span style="color: #808080;">%</span>notfound;<br />            dbms_output.put_line(c_row.empno<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.ename<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.job<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">-</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>c_row.sal);<br />         <span style="color: #0000ff;">end</span> loop;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">关闭游标</span><span style="color: #008080;"><br /></span>      <span style="color: #0000ff;">close</span> c_job;<br /><span style="color: #0000ff;">end</span>;<br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">1：任意执行一个update操作，用隐式游标sql的属性%found,%notfound,%rowcount,%isopen观察update语句的执行情况。</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">begin</span><br />         <span style="color: #0000ff;">update</span> emp <span style="color: #0000ff;">set</span> ENAME<span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">ALEARK</span><span style="color: #ff0000;">'</span> <span style="color: #0000ff;">WHERE</span> EMPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">7469</span>;<br />         <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>isopen <span style="color: #0000ff;">then</span><br />           dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Openging</span><span style="color: #ff0000;">'</span>);<br />           <span style="color: #0000ff;">else</span><br />             dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">closing</span><span style="color: #ff0000;">'</span>);<br />             <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />          <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>found <span style="color: #0000ff;">then</span><br />            dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">游标指向了有效行</span><span style="color: #ff0000;">'</span>);<span style="color: #008080;">--</span><span style="color: #008080;">判断游标是否指向有效行</span><span style="color: #008080;"><br /></span>            <span style="color: #0000ff;">else</span><br />              dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Sorry</span><span style="color: #ff0000;">'</span>);<br />              <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />              <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>notfound <span style="color: #0000ff;">then</span><br />                dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Also Sorry</span><span style="color: #ff0000;">'</span>);<br />                <span style="color: #0000ff;">else</span><br />                  dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Haha</span><span style="color: #ff0000;">'</span>);<br />                  <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />                   dbms_output.put_line(sql<span style="color: #808080;">%</span><span style="color: #0000ff;">rowcount</span>);<br />                   exception <br />                     <span style="color: #0000ff;">when</span> no_data_found <span style="color: #0000ff;">then</span><br />                       dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Sorry No data</span><span style="color: #ff0000;">'</span>);<br />                       <span style="color: #0000ff;">when</span> too_many_rows <span style="color: #0000ff;">then</span><br />                         dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Too Many rows</span><span style="color: #ff0000;">'</span>);<br />                         <span style="color: #0000ff;">end</span>;<br /><span style="color: #0000ff;">declare</span><br />       empNumber emp.EMPNO<span style="color: #808080;">%</span>TYPE;<br />       empName emp.ENAME<span style="color: #808080;">%</span>TYPE;<br />       <span style="color: #0000ff;">begin</span><br />         <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>isopen <span style="color: #0000ff;">then</span><br />           dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Cursor is opinging</span><span style="color: #ff0000;">'</span>);<br />           <span style="color: #0000ff;">else</span><br />             dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Cursor is Close</span><span style="color: #ff0000;">'</span>);<br />             <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />             <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>notfound <span style="color: #0000ff;">then</span><br />               dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">No Value</span><span style="color: #ff0000;">'</span>);<br />               <span style="color: #0000ff;">else</span><br />                 dbms_output.put_line(empNumber);<br />                 <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />                 dbms_output.put_line(sql<span style="color: #808080;">%</span><span style="color: #0000ff;">rowcount</span>);<br />                 dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">-------------</span><span style="color: #ff0000;">'</span>);<br />                 <br />                 <span style="color: #0000ff;">select</span> EMPNO,ENAME <span style="color: #0000ff;">into</span>  empNumber,empName <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> EMPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">7499</span>;<br />                 dbms_output.put_line(sql<span style="color: #808080;">%</span><span style="color: #0000ff;">rowcount</span>);<br />                 <br />                <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>isopen <span style="color: #0000ff;">then</span><br />                dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Cursor is opinging</span><span style="color: #ff0000;">'</span>);<br />                <span style="color: #0000ff;">else</span><br />                dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">Cursor is Closing</span><span style="color: #ff0000;">'</span>);<br />                <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />                 <span style="color: #0000ff;">if</span> sql<span style="color: #808080;">%</span>notfound <span style="color: #0000ff;">then</span><br />                 dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">No Value</span><span style="color: #ff0000;">'</span>);<br />                 <span style="color: #0000ff;">else</span><br />                 dbms_output.put_line(empNumber);<br />                 <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />                 exception <br />                   <span style="color: #0000ff;">when</span> no_data_found <span style="color: #0000ff;">then</span><br />                     dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">No Value</span><span style="color: #ff0000;">'</span>);<br />                     <span style="color: #0000ff;">when</span> too_many_rows <span style="color: #0000ff;">then</span><br />                       dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">too many rows</span><span style="color: #ff0000;">'</span>);<br />                       <span style="color: #0000ff;">end</span>;<br />                   <br />                 <br />       <br /><span style="color: #008080;">--</span><span style="color: #008080;">2,使用游标和loop循环来显示所有部门的名称</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">游标声明</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span> <br />       <span style="color: #0000ff;">cursor</span> csr_dept<br />       <span style="color: #0000ff;">is</span><br />       <span style="color: #008080;">--</span><span style="color: #008080;">select语句</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">select</span> DNAME<br />       <span style="color: #0000ff;">from</span> Depth;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">指定行指针,这句话应该是指定和csr_dept行类型相同的变量</span><span style="color: #008080;"><br /></span>       row_dept csr_dept<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />       <span style="color: #008080;">--</span><span style="color: #008080;">for循环</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">for</span> row_dept <span style="color: #808080;">in</span> csr_dept loop<br />           dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">部门名称:</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>row_dept.DNAME);<br />       <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">3,使用游标和while循环来显示所有部门的的地理位置（用%found属性）</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />       <span style="color: #008080;">--</span><span style="color: #008080;">游标声明</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">cursor</span> csr_TestWhile<br />       <span style="color: #0000ff;">is</span><br />       <span style="color: #008080;">--</span><span style="color: #008080;">select语句</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">select</span>  LOC<br />       <span style="color: #0000ff;">from</span> Depth;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">指定行指针</span><span style="color: #008080;"><br /></span>       row_loc csr_TestWhile<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />  <span style="color: #008080;">--</span><span style="color: #008080;">打开游标</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">open</span> csr_TestWhile;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">给第一行喂数据</span><span style="color: #008080;"><br /></span>       <span style="color: #0000ff;">fetch</span> csr_TestWhile <span style="color: #0000ff;">into</span> row_loc;<br />       <span style="color: #008080;">--</span><span style="color: #008080;">测试是否有数据，并执行循环</span><span style="color: #008080;"><br /></span>         <span style="color: #0000ff;">while</span> csr_TestWhile<span style="color: #808080;">%</span>found loop<br />           dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">部门地点：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>row_loc.LOC);<br />           <span style="color: #008080;">--</span><span style="color: #008080;">给下一行喂数据</span><span style="color: #008080;"><br /></span>           <span style="color: #0000ff;">fetch</span> csr_TestWhile <span style="color: #0000ff;">into</span> row_loc;<br />         <span style="color: #0000ff;">end</span> loop;<br />       <span style="color: #0000ff;">close</span> csr_TestWhile;<br /><span style="color: #0000ff;">end</span>; <br /><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp<br /><br /><br /><br />       <br /><span style="color: #008080;">--</span><span style="color: #008080;">4,接收用户输入的部门编号，用for循环和游标，打印出此部门的所有雇员的所有信息(使用循环游标)</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">CURSOR cursor_name[(parameter[,parameter],...)] IS select_statement;</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">定义参数的语法如下:Parameter_name [IN] data_type[{:=|DEFAULT} value]  </span><span style="color: #008080;"><br /></span><br /><span style="color: #0000ff;">declare</span> <br />      <span style="color: #0000ff;">CURSOR</span> <br />      c_dept(p_deptNo <span style="color: #0000ff;">number</span>)<br />      <span style="color: #0000ff;">is</span><br />      <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> emp.depno<span style="color: #808080;">=</span>p_deptNo;<br />      r_emp emp<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />        <span style="color: #0000ff;">for</span> r_emp <span style="color: #808080;">in</span> c_dept(<span style="color: #800000; font-weight: bold;">20</span>) loop<br />            dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">员工号：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_emp.EMPNO<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">员工名：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_emp.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">工资：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_emp.SAL);<br />        <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp   <br /><span style="color: #008080;">--</span><span style="color: #008080;">5：向游标传递一个工种，显示此工种的所有雇员的所有信息(使用参数游标)</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span> <br />       <span style="color: #0000ff;">cursor</span><br />       c_job(p_job nvarchar2)<br />       <span style="color: #0000ff;">is</span> <br />       <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> JOB<span style="color: #808080;">=</span>p_job;<br />       r_job emp<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span> <br />       <span style="color: #0000ff;">for</span> r_job <span style="color: #808080;">in</span> c_job(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">CLERK</span><span style="color: #ff0000;">'</span>) loop<br />           dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">员工号</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_job.EMPNO<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span> <span style="color: #ff0000;">'</span><span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">员工姓名</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_job.ENAME);<br />        <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><span style="color: #0000ff;">SELECT</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">FROM</span> EMP<br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">6：用更新游标来为雇员加佣金：(用if实现,创建一个与emp表一摸一样的emp1表，对emp1表进行修改操作),并将更新前后的数据输出出来 </span><span style="color: #008080;"><br />--</span><span style="color: #008080;">http://zheng12tian.iteye.com/blog/815770 </span><span style="color: #008080;"><br /></span>        <span style="color: #0000ff;">create</span> <span style="color: #0000ff;">table</span> emp1 <span style="color: #0000ff;">as</span> <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp;<br />        <br /><span style="color: #0000ff;">declare</span><br />        <span style="color: #0000ff;">cursor</span><br />        csr_Update<br />        <span style="color: #0000ff;">is</span><br />        <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span>  emp1 <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">update</span> <span style="color: #0000ff;">OF</span> SAL;<br />        empInfo csr_Update<span style="color: #808080;">%</span>rowtype;<br />        saleInfo  emp1.SAL<span style="color: #808080;">%</span>TYPE;<br /><span style="color: #0000ff;">begin</span><br />    <span style="color: #0000ff;">FOR</span> empInfo <span style="color: #808080;">IN</span> csr_Update LOOP<br />      <span style="color: #0000ff;">IF</span> empInfo.SAL<span style="color: #808080;">&lt;</span><span style="color: #800000; font-weight: bold;">1500</span> <span style="color: #0000ff;">THEN</span><br />        saleInfo:<span style="color: #808080;">=</span>empInfo.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.2</span>;<br />       elsif empInfo.SAL<span style="color: #808080;">&lt;</span><span style="color: #800000; font-weight: bold;">2000</span> <span style="color: #0000ff;">THEN</span><br />        saleInfo:<span style="color: #808080;">=</span>empInfo.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.5</span>;<br />        elsif empInfo.SAL<span style="color: #808080;">&lt;</span><span style="color: #800000; font-weight: bold;">3000</span> <span style="color: #0000ff;">THEN</span><br />        saleInfo:<span style="color: #808080;">=</span>empInfo.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">2</span>;<br />      <span style="color: #0000ff;">END</span> <span style="color: #0000ff;">IF</span>;<br />      <span style="color: #0000ff;">UPDATE</span> emp1 <span style="color: #0000ff;">SET</span> SAL<span style="color: #808080;">=</span>saleInfo <span style="color: #0000ff;">WHERE</span> <span style="color: #0000ff;">CURRENT</span> <span style="color: #0000ff;">OF</span> csr_Update;<br />     <span style="color: #0000ff;">END</span> LOOP;<br /><span style="color: #0000ff;">END</span>;<br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">7:编写一个PL/SQL程序块，对名字以&lsquo;A&rsquo;或&lsquo;S&rsquo;开始的所有雇员按他们的基本薪水(sal)的10%给他们加薪(对emp1表进行修改操作)</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span> <br />     <span style="color: #0000ff;">cursor</span><br />      csr_AddSal<br />     <span style="color: #0000ff;">is</span><br />      <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1 <span style="color: #0000ff;">where</span> ENAME <span style="color: #808080;">LIKE</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">A%</span><span style="color: #ff0000;">'</span> <span style="color: #808080;">OR</span> ENAME <span style="color: #808080;">LIKE</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">S%</span><span style="color: #ff0000;">'</span> <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">update</span> <span style="color: #0000ff;">OF</span> SAL;<br />      r_AddSal csr_AddSal<span style="color: #808080;">%</span>rowtype;<br />      saleInfo  emp1.SAL<span style="color: #808080;">%</span>TYPE;<br /><span style="color: #0000ff;">begin</span><br />      <span style="color: #0000ff;">for</span> r_AddSal <span style="color: #808080;">in</span> csr_AddSal loop<br />          dbms_output.put_line(r_AddSal.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">原来的工资:</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_AddSal.SAL);<br />          saleInfo:<span style="color: #808080;">=</span>r_AddSal.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.1</span>;<br />          <span style="color: #0000ff;">UPDATE</span> emp1 <span style="color: #0000ff;">SET</span> SAL<span style="color: #808080;">=</span>saleInfo <span style="color: #0000ff;">WHERE</span> <span style="color: #0000ff;">CURRENT</span> <span style="color: #0000ff;">OF</span> csr_AddSal;<br />      <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><span style="color: #008080;">--</span><span style="color: #008080;">8：编写一个PL/SQL程序块，对所有的salesman增加佣金(comm)500</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />      <span style="color: #0000ff;">cursor</span><br />          csr_AddComm(p_job nvarchar2)<br />      <span style="color: #0000ff;">is</span><br />          <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1 <span style="color: #0000ff;">where</span>   JOB<span style="color: #808080;">=</span>p_job <span style="color: #0000ff;">FOR</span> <span style="color: #0000ff;">UPDATE</span> <span style="color: #0000ff;">OF</span> COMM;<br />      r_AddComm  emp1<span style="color: #808080;">%</span>rowtype;<br />      commInfo emp1.comm<span style="color: #808080;">%</span>type;<br /><span style="color: #0000ff;">begin</span><br />    <span style="color: #0000ff;">for</span> r_AddComm <span style="color: #808080;">in</span> csr_AddComm(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">SALESMAN</span><span style="color: #ff0000;">'</span>) LOOP<br />        commInfo:<span style="color: #808080;">=</span>r_AddComm.COMM<span style="color: #808080;">+</span><span style="color: #800000; font-weight: bold;">500</span>;<br />         <span style="color: #0000ff;">UPDATE</span> EMP1 <span style="color: #0000ff;">SET</span> COMM<span style="color: #808080;">=</span>commInfo <span style="color: #0000ff;">where</span> <span style="color: #0000ff;">CURRENT</span> <span style="color: #0000ff;">OF</span> csr_AddComm;<br />    <span style="color: #0000ff;">END</span> LOOP;<br /><span style="color: #0000ff;">END</span>;<br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">9：编写一个PL/SQL程序块，以提升2个资格最老的职员为MANAGER（工作时间越长，资格越老）</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">（提示：可以定义一个变量作为计数器控制游标只提取两条数据；也可以在声明游标的时候把雇员中资格最老的两个人查出来放到游标中。）</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />    <span style="color: #0000ff;">cursor</span> crs_testComput<br />    <span style="color: #0000ff;">is</span><br />    <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1 <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> HIREDATE <span style="color: #0000ff;">asc</span>;<br />    <span style="color: #008080;">--</span><span style="color: #008080;">计数器</span><span style="color: #008080;"><br /></span>    top_two <span style="color: #0000ff;">number</span>:<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">2</span>;<br />    r_testComput crs_testComput<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />    <span style="color: #0000ff;">open</span> crs_testComput;<br />       <span style="color: #0000ff;">FETCH</span> crs_testComput <span style="color: #0000ff;">INTO</span> r_testComput;<br />          <span style="color: #0000ff;">while</span> top_two<span style="color: #808080;">&gt;</span><span style="color: #800000; font-weight: bold;">0</span> loop<br />             dbms_output.put_line(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">员工姓名：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_testComput.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;"> 工作时间：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_testComput.HIREDATE);<br />             <span style="color: #008080;">--</span><span style="color: #008080;">计速器减一</span><span style="color: #008080;"><br /></span>             top_two:<span style="color: #808080;">=</span>top_two<span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>;<br />             <span style="color: #0000ff;">FETCH</span> crs_testComput <span style="color: #0000ff;">INTO</span> r_testComput;<br />           <span style="color: #0000ff;">end</span> loop;<br />     <span style="color: #0000ff;">close</span> crs_testComput;<br /><span style="color: #0000ff;">end</span>;<br />    <br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">10：编写一个PL/SQL程序块，对所有雇员按他们的基本薪水(sal)的20%为他们加薪，</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">如果增加的薪水大于300就取消加薪(对emp1表进行修改操作，并将更新前后的数据输出出来) </span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />    <span style="color: #0000ff;">cursor</span><br />        crs_UpadateSal<br />    <span style="color: #0000ff;">is</span><br />        <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1 <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">update</span> <span style="color: #0000ff;">of</span> SAL;<br />        r_UpdateSal crs_UpadateSal<span style="color: #808080;">%</span>rowtype;<br />        salAdd emp1.sal<span style="color: #808080;">%</span>type;<br />        salInfo emp1.sal<span style="color: #808080;">%</span>type;<br /><span style="color: #0000ff;">begin</span><br />        <span style="color: #0000ff;">for</span> r_UpdateSal <span style="color: #808080;">in</span> crs_UpadateSal loop<br />           salAdd:<span style="color: #808080;">=</span> r_UpdateSal.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">0.2</span>;<br />           <span style="color: #0000ff;">if</span> salAdd<span style="color: #808080;">&gt;</span><span style="color: #800000; font-weight: bold;">300</span> <span style="color: #0000ff;">then</span><br />             salInfo:<span style="color: #808080;">=</span>r_UpdateSal.SAL;<br />              dbms_output.put_line(r_UpdateSal.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">:  加薪失败。</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">薪水维持在：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_UpdateSal.SAL);<br />             <span style="color: #0000ff;">else</span> <br />              salInfo:<span style="color: #808080;">=</span>r_UpdateSal.SAL<span style="color: #808080;">+</span>salAdd;<br />              dbms_output.put_line(r_UpdateSal.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">:  加薪成功.</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">薪水变为：</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>salInfo);<br />           <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />           <span style="color: #0000ff;">update</span> emp1 <span style="color: #0000ff;">set</span> SAL<span style="color: #808080;">=</span>salInfo <span style="color: #0000ff;">where</span> <span style="color: #0000ff;">current</span> <span style="color: #0000ff;">of</span> crs_UpadateSal;<br />        <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br />     <br /><span style="color: #008080;">--</span><span style="color: #008080;">11:将每位员工工作了多少年零多少月零多少天输出出来   </span><span style="color: #008080;"><br />--</span><span style="color: #008080;">近似</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">CEIL(n)函数：取大于等于数值n的最小整数</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">FLOOR(n)函数：取小于等于数值n的最大整数</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">truc的用法 http://publish.it168.com/2005/1028/20051028034101.shtml</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />  <span style="color: #0000ff;">cursor</span><br />   crs_WorkDay<br />   <span style="color: #0000ff;">is</span><br />   <span style="color: #0000ff;">select</span> ENAME,HIREDATE, trunc(months_between(sysdate, hiredate) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">12</span>) <span style="color: #0000ff;">AS</span> SPANDYEARS,<br />       trunc(mod(months_between(sysdate, hiredate), <span style="color: #800000; font-weight: bold;">12</span>)) <span style="color: #0000ff;">AS</span> months,<br />       trunc(mod(mod(sysdate <span style="color: #808080;">-</span> hiredate, <span style="color: #800000; font-weight: bold;">365</span>), <span style="color: #800000; font-weight: bold;">12</span>)) <span style="color: #0000ff;">as</span> days<br />   <span style="color: #0000ff;">from</span> emp1;<br />  r_WorkDay crs_WorkDay<span style="color: #808080;">%</span>rowtype;<br /><span style="color: #0000ff;">begin</span><br />    <span style="color: #0000ff;">for</span>   r_WorkDay <span style="color: #808080;">in</span> crs_WorkDay loop<br />    dbms_output.put_line(r_WorkDay.ENAME<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">已经工作了</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_WorkDay.SPANDYEARS<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">年,零</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_WorkDay.months<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">月,零</span><span style="color: #ff0000;">'</span><span style="color: #808080;">||</span>r_WorkDay.days<span style="color: #808080;">||</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">天</span><span style="color: #ff0000;">'</span>);<br />    <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br />  <br /><span style="color: #008080;">--</span><span style="color: #008080;">12:输入部门编号，按照下列加薪比例执行(用CASE实现，创建一个emp1表，修改emp1表的数据),并将更新前后的数据输出出来</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  deptno  raise(%)</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  10      5%</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  20      10%</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  30      15%</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  40      20%</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">  加薪比例以现有的sal为标准</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">CASE expr WHEN comparison_expr THEN return_expr</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">[, WHEN comparison_expr THEN return_expr]... [ELSE else_expr] END</span><span style="color: #008080;"><br /></span><span style="color: #0000ff;">declare</span><br />     <span style="color: #0000ff;">cursor</span><br />         crs_caseTest<br />          <span style="color: #0000ff;">is</span><br />          <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1 <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">update</span> <span style="color: #0000ff;">of</span> SAL;<br />          r_caseTest crs_caseTest<span style="color: #808080;">%</span>rowtype;<br />          salInfo emp1.sal<span style="color: #808080;">%</span>type;<br />     <span style="color: #0000ff;">begin</span><br />         <span style="color: #0000ff;">for</span> r_caseTest <span style="color: #808080;">in</span> crs_caseTest loop<br />         <span style="color: #ff00ff;">case</span> <br />           <span style="color: #0000ff;">when</span> r_caseTest.DEPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">10</span><br />           <span style="color: #0000ff;">THEN</span> salInfo:<span style="color: #808080;">=</span>r_caseTest.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.05</span>;<br />           <span style="color: #0000ff;">when</span> r_caseTest.DEPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">20</span><br />           <span style="color: #0000ff;">THEN</span> salInfo:<span style="color: #808080;">=</span>r_caseTest.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.1</span>;<br />           <span style="color: #0000ff;">when</span> r_caseTest.DEPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">30</span><br />           <span style="color: #0000ff;">THEN</span> salInfo:<span style="color: #808080;">=</span>r_caseTest.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.15</span>;<br />            <span style="color: #0000ff;">when</span> r_caseTest.DEPNO<span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">40</span><br />           <span style="color: #0000ff;">THEN</span> salInfo:<span style="color: #808080;">=</span>r_caseTest.SAL<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">1.2</span>;<br />         <span style="color: #0000ff;">end</span> <span style="color: #ff00ff;">case</span>;<br />          <span style="color: #0000ff;">update</span> emp1 <span style="color: #0000ff;">set</span> SAL<span style="color: #808080;">=</span>salInfo <span style="color: #0000ff;">where</span> <span style="color: #0000ff;">current</span> <span style="color: #0000ff;">of</span> crs_caseTest;<br />        <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;<br /><br /><span style="color: #008080;">--</span><span style="color: #008080;">13:对每位员工的薪水进行判断，如果该员工薪水高于其所在部门的平均薪水，则将其薪水减50元，输出更新前后的薪水，员工姓名，所在部门编号。</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">AVG([distinct|all] expr) over (analytic_clause)</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">-作用：</span><span style="color: #008080;"><br />--</span><span style="color: #008080;">按照analytic_clause中的规则求分组平均值。</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">分析函数语法:</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">FUNCTION_NAME(&lt;argument&gt;,&lt;argument&gt;...)</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">OVER</span><span style="color: #008080;"><br /></span>  <span style="color: #008080;">--</span><span style="color: #008080;">(&lt;Partition-Clause&gt;&lt;Order-by-Clause&gt;&lt;Windowing Clause&gt;)</span><span style="color: #008080;"><br /></span>     <span style="color: #008080;">--</span><span style="color: #008080;">PARTITION子句</span><span style="color: #008080;"><br /></span>     <span style="color: #008080;">--</span><span style="color: #008080;">按照表达式分区(就是分组),如果省略了分区子句,则全部的结果集被看作是一个单一的组</span><span style="color: #008080;"><br /></span>     <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp1<br /><span style="color: #0000ff;">DECLARE</span><br />     <span style="color: #0000ff;">CURSOR</span> <br />     crs_testAvg<br />     <span style="color: #0000ff;">IS</span><br />     <span style="color: #0000ff;">select</span> EMPNO,ENAME,JOB,SAL,DEPNO,<span style="color: #ff00ff;">AVG</span>(SAL) <span style="color: #0000ff;">OVER</span> (PARTITION <span style="color: #0000ff;">BY</span> DEPNO ) <span style="color: #0000ff;">AS</span> DEP_AVG<br />     <span style="color: #0000ff;">FROM</span> EMP1 <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">update</span> <span style="color: #0000ff;">of</span> SAL;<br />     r_testAvg crs_testAvg<span style="color: #808080;">%</span>rowtype;<br />     salInfo emp1.sal<span style="color: #808080;">%</span>type;<br />     <span style="color: #0000ff;">begin</span><br />     <span style="color: #0000ff;">for</span> r_testAvg <span style="color: #808080;">in</span> crs_testAvg loop<br />     <span style="color: #0000ff;">if</span> r_testAvg.SAL<span style="color: #808080;">&gt;</span>r_testAvg.DEP_AVG <span style="color: #0000ff;">then</span><br />     salInfo:<span style="color: #808080;">=</span>r_testAvg.SAL<span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">50</span>;<br />     <span style="color: #0000ff;">end</span> <span style="color: #0000ff;">if</span>;<br />     <span style="color: #0000ff;">update</span> emp1 <span style="color: #0000ff;">set</span> SAL<span style="color: #808080;">=</span>salInfo <span style="color: #0000ff;">where</span> <span style="color: #0000ff;">current</span> <span style="color: #0000ff;">of</span> crs_testAvg;<br />     <span style="color: #0000ff;">end</span> loop;<br /><span style="color: #0000ff;">end</span>;</pre>
</div>
<p><br /><br /></p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2011-12-03 23:21</span> <a href='http://www.cnblogs.com/sc-xx/'>shawnXiao</a> Views(<span id="post_view_count">...</span>) Comments(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=2275084" rel="nofollow">Edit</a> <a href="#" onclick="AddToWz(2275084);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=76000,cb_entryId=2275084,cb_blogApp=currentBlogApp,cb_blogUserGuid='a226dd58-8cc1-df11-ac81-842b2b196315',cb_entryCreatedDate='2011/12/3 23:21:00';loadViewCount(cb_entryId);</script>
	
</div>
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<div id='cnblogs_c1' class='c_ad_block'></div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'></div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"></div>
			
			<DIV id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</DIV>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2017 shawnXiao
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
</body>
</html>
